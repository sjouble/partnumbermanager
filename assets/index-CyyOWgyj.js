import{r as M,a as X,c as R,g as V}from"./vendor-BECWLT86.js";import{s as Z}from"./tesseract-B00NKKn6.js";(function(){const b=document.createElement("link").relList;if(b&&b.supports&&b.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))p(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&p(n)}).observe(document,{childList:!0,subtree:!0});function N(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function p(u){if(u.ep)return;u.ep=!0;const c=N(u);fetch(u.href,c)}})();var q={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee=M,te=Symbol.for("react.element"),re=Symbol.for("react.fragment"),ne=Object.prototype.hasOwnProperty,ie=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oe={key:!0,ref:!0,__self:!0,__source:!0};function F(S,b,N){var p,u={},c=null,n=null;N!==void 0&&(c=""+N),b.key!==void 0&&(c=""+b.key),b.ref!==void 0&&(n=b.ref);for(p in b)ne.call(b,p)&&!oe.hasOwnProperty(p)&&(u[p]=b[p]);if(S&&S.defaultProps)for(p in b=S.defaultProps,b)u[p]===void 0&&(u[p]=b[p]);return{$$typeof:te,type:S,key:c,ref:n,props:u,_owner:ie.current}}k.Fragment=re;k.jsx=F;k.jsxs=F;q.exports=k;var r=q.exports,D,I=X;D=I.createRoot,I.hydrateRoot;var W={exports:{}};(function(S,b){(function(p,u){S.exports=u(M)})(R,function(N){return function(p){var u={};function c(n){if(u[n])return u[n].exports;var v=u[n]={i:n,l:!1,exports:{}};return p[n].call(v.exports,v,v.exports,c),v.l=!0,v.exports}return c.m=p,c.c=u,c.d=function(n,v,g){c.o(n,v)||Object.defineProperty(n,v,{enumerable:!0,get:g})},c.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},c.t=function(n,v){if(v&1&&(n=c(n)),v&8||v&4&&typeof n=="object"&&n&&n.__esModule)return n;var g=Object.create(null);if(c.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:n}),v&2&&typeof n!="string")for(var d in n)c.d(g,d,(function(f){return n[f]}).bind(null,d));return g},c.n=function(n){var v=n&&n.__esModule?function(){return n.default}:function(){return n};return c.d(v,"a",v),v},c.o=function(n,v){return Object.prototype.hasOwnProperty.call(n,v)},c.p="",c(c.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(p,u,c){c.r(u);var n=c("react"),v=function(){var a=function(o,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,l){t.__proto__=l}||function(t,l){for(var s in l)l.hasOwnProperty(s)&&(t[s]=l[s])},a(o,e)};return function(o,e){a(o,e);function t(){this.constructor=o}o.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),g=function(){return g=Object.assign||function(a){for(var o,e=1,t=arguments.length;e<t;e++){o=arguments[e];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},g.apply(this,arguments)},d=function(a,o){var e={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&o.indexOf(t)<0&&(e[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(a);l<t.length;l++)o.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(a,t[l])&&(e[t[l]]=a[t[l]]);return e};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(o){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise(function(t,l){e.call(navigator,o,t,l)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function f(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var U=function(a){v(o,a);function o(e){var t=a.call(this,e)||this;return t.canvas=null,t.ctx=null,t.requestUserMediaId=0,t.unmounted=!1,t.state={hasUserMedia:!1},t}return o.prototype.componentDidMount=function(){var e=this,t=e.state,l=e.props;if(this.unmounted=!1,!f()){l.onUserMediaError("getUserMedia not supported");return}t.hasUserMedia||this.requestUserMedia(),l.children&&typeof l.children!="function"&&console.warn("children must be a function")},o.prototype.componentDidUpdate=function(e){var t=this.props;if(!f()){t.onUserMediaError("getUserMedia not supported");return}var l=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),s=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),x=e.minScreenshotWidth!==t.minScreenshotWidth,h=e.minScreenshotHeight!==t.minScreenshotHeight;(s||x||h)&&(this.canvas=null,this.ctx=null),(l||s)&&(this.stopAndCleanup(),this.requestUserMedia())},o.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},o.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},o.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(o.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},o.prototype.getScreenshot=function(e){var t=this,l=t.state,s=t.props;if(!l.hasUserMedia)return null;var x=this.getCanvas(e);return x&&x.toDataURL(s.screenshotFormat,s.screenshotQuality)},o.prototype.getCanvas=function(e){var t=this,l=t.state,s=t.props;if(!this.video||!l.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var x=this.video.videoWidth,h=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var y=x/h;x=s.minScreenshotWidth||this.video.clientWidth,h=x/y,s.minScreenshotHeight&&h<s.minScreenshotHeight&&(h=s.minScreenshotHeight,x=h*y)}this.canvas=document.createElement("canvas"),this.canvas.width=(e==null?void 0:e.width)||x,this.canvas.height=(e==null?void 0:e.height)||h,this.ctx=this.canvas.getContext("2d")}var E=this,j=E.ctx,m=E.canvas;return j&&m&&(m.width=(e==null?void 0:e.width)||m.width,m.height=(e==null?void 0:e.height)||m.height,s.mirrored&&(j.translate(m.width,0),j.scale(-1,1)),j.imageSmoothingEnabled=s.imageSmoothing,j.drawImage(this.video,0,0,(e==null?void 0:e.width)||m.width,(e==null?void 0:e.height)||m.height),s.mirrored&&(j.scale(-1,1),j.translate(-m.width,0))),m},o.prototype.requestUserMedia=function(){var e=this,t=this.props,l=function(h,y){var E={video:typeof y<"u"?y:!0};t.audio&&(E.audio=typeof h<"u"?h:!0),e.requestUserMediaId++;var j=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(E).then(function(m){e.unmounted||j!==e.requestUserMediaId?o.stopMediaStream(m):e.handleUserMedia(null,m)}).catch(function(m){e.handleUserMedia(m)})};if("mediaDevices"in navigator)l(t.audioConstraints,t.videoConstraints);else{var s=function(h){return{optional:[{sourceId:h}]}},x=function(h){var y=h.deviceId;return typeof y=="string"?y:Array.isArray(y)&&y.length>0?y[0]:typeof y=="object"&&y.ideal?y.ideal:null};MediaStreamTrack.getSources(function(h){var y=null,E=null;h.forEach(function(O){O.kind==="audio"?y=O.id:O.kind==="video"&&(E=O.id)});var j=x(t.audioConstraints);j&&(y=j);var m=x(t.videoConstraints);m&&(E=m),l(s(y),s(E))})}},o.prototype.handleUserMedia=function(e,t){var l=this.props;if(e||!t){this.setState({hasUserMedia:!1}),l.onUserMediaError(e);return}this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}l.onUserMedia(t)},o.prototype.render=function(){var e=this,t=this,l=t.state,s=t.props,x=s.audio;s.forceScreenshotSourceSize;var h=s.disablePictureInPicture;s.onUserMedia,s.onUserMediaError,s.screenshotFormat,s.screenshotQuality,s.minScreenshotWidth,s.minScreenshotHeight,s.audioConstraints,s.videoConstraints,s.imageSmoothing;var y=s.mirrored,E=s.style,j=E===void 0?{}:E,m=s.children,O=d(s,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),_=y?g(g({},j),{transform:(j.transform||"")+" scaleX(-1)"}):j,P={getScreenshot:this.getScreenshot.bind(this)};return n.createElement(n.Fragment,null,n.createElement("video",g({autoPlay:!0,disablePictureInPicture:h,src:l.src,muted:!x,playsInline:!0,ref:function(L){e.video=L},style:_},O)),m&&m(P))},o.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},o}(n.Component);u.default=U},react:function(p,u){p.exports=N}}).default})})(W);var ae=W.exports;const se=V(ae);var $={exports:{}};(function(S,b){(function(N,p){p()})(R,function(){function N(d,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function p(d,f,U){var a=new XMLHttpRequest;a.open("GET",d),a.responseType="blob",a.onload=function(){g(a.response,f,U)},a.onerror=function(){console.error("could not download file")},a.send()}function u(d){var f=new XMLHttpRequest;f.open("HEAD",d,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function c(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(f)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof R=="object"&&R.global===R?R:void 0,v=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!v?function(d,f,U){var a=n.URL||n.webkitURL,o=document.createElement("a");f=f||d.name||"download",o.download=f,o.rel="noopener",typeof d=="string"?(o.href=d,o.origin===location.origin?c(o):u(o.href)?p(d,f,U):c(o,o.target="_blank")):(o.href=a.createObjectURL(d),setTimeout(function(){a.revokeObjectURL(o.href)},4e4),setTimeout(function(){c(o)},0))}:"msSaveOrOpenBlob"in navigator?function(d,f,U){if(f=f||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(N(d,U),f);else if(u(d))p(d,f,U);else{var a=document.createElement("a");a.href=d,a.target="_blank",setTimeout(function(){c(a)})}}:function(d,f,U,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof d=="string")return p(d,f,U);var o=d.type==="application/octet-stream",e=/constructor/i.test(n.HTMLElement)||n.safari,t=/CriOS\/[\d]+/.test(navigator.userAgent);if((t||o&&e||v)&&typeof FileReader<"u"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=t?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=h:location=h,a=null},l.readAsDataURL(d)}else{var s=n.URL||n.webkitURL,x=s.createObjectURL(d);a?a.location=x:location.href=x,a=null,setTimeout(function(){s.revokeObjectURL(x)},4e4)}});n.saveAs=g.saveAs=g,S.exports=g})})($);var ce=$.exports;function le(){const[S,b]=M.useState(null),[N,p]=M.useState(!1),[u,c]=M.useState(""),[n,v]=M.useState(""),[g,d]=M.useState([]),[f,U]=M.useState(""),[a,o]=M.useState(""),[e,t]=M.useState("카톤"),[l,s]=M.useState(""),[x,h]=M.useState(!1),[y,E]=M.useState(["카톤","중포","개"]),[j,m]=M.useState(""),[O,_]=M.useState(0),P=M.useRef(null),L=M.useCallback(()=>{if(P.current){const i=P.current.getScreenshot();b(i),m("")}},[P]),B=()=>{b(null),c(""),v(""),U(""),o(""),s("")},H=async()=>{if(S){p(!0),_(0);try{const i=await Z.createWorker("kor+eng");_(30);const{data:{text:w}}=await i.recognize(S);_(100),c(w),await i.terminate()}catch(i){console.error("OCR 처리 중 오류:",i),m("이미지 처리 중 오류가 발생했습니다.")}finally{p(!1),_(0)}}},z=i=>{v(i),U(i)},G=()=>{if(!f.trim()||!a.trim())return;const i={id:Date.now().toString(),number:f.trim(),quantity:a.trim(),unit:e,expiryDate:l.trim()||void 0};d(w=>[...w,i]),U(""),o(""),s("")},Q=i=>{d(w=>w.filter(C=>C.id!==i))},A=i=>{i.trim()&&!y.includes(i.trim())&&E(w=>[...w,i.trim()]),h(!1)},J=()=>{const i=g.map(C=>`품번: ${C.number}, 수량: ${C.quantity}${C.unit}${C.expiryDate?`, 유통기한: ${C.expiryDate}`:""}`).join(`
`),w=new Blob([i],{type:"text/plain;charset=utf-8"});ce.saveAs(w,"품번목록.txt")},Y=async()=>{const i=g.map(w=>`품번: ${w.number}, 수량: ${w.quantity}${w.unit}${w.expiryDate?`, 유통기한: ${w.expiryDate}`:""}`).join(`
`);if(navigator.share)try{await navigator.share({title:"품번 목록",text:i})}catch{console.log("공유 취소됨")}else navigator.clipboard.writeText(i),alert("품번 목록이 클립보드에 복사되었습니다.")},K=()=>{m("카메라에 접근할 수 없습니다. 카메라 권한을 확인해주세요.")};return r.jsxs("div",{className:"App",children:[r.jsxs("header",{className:"App-header",children:[r.jsx("h1",{children:"품번 정리 앱"}),r.jsx("p",{className:"app-subtitle",children:"Tesseract.js 클라이언트 사이드 OCR"})]}),r.jsxs("main",{className:"App-main",children:[r.jsxs("section",{className:"camera-section",children:[r.jsx("h2",{children:"📷 카메라 촬영"}),S?r.jsxs("div",{className:"image-container",children:[r.jsx("img",{src:S,alt:"촬영된 이미지"}),r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"retake-btn",onClick:B,children:"🔄 다시 촬영"}),r.jsx("button",{className:"capture-btn",onClick:H,disabled:N,children:"🔍 텍스트 인식"})]})]}):r.jsxs("div",{className:"camera-container",children:[r.jsx(se,{ref:P,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},onUserMediaError:K}),r.jsx("button",{className:"capture-btn",onClick:L,children:"📸 촬영하기"})]}),j&&r.jsx("div",{className:"camera-error",children:r.jsx("p",{children:j})})]}),N&&r.jsxs("div",{className:"processing",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"이미지를 분석하고 있습니다..."}),r.jsx("div",{className:"progress-bar",children:r.jsx("div",{className:"progress-fill",style:{width:`${O}%`}})}),r.jsxs("p",{className:"progress-text",children:[O,"%"]})]}),u&&r.jsxs("section",{className:"result-section",children:[r.jsx("h2",{children:"🔍 인식된 텍스트"}),r.jsxs("div",{className:"ocr-result",children:[r.jsx("h3",{children:"선택할 텍스트를 클릭하세요:"}),r.jsx("div",{className:"recognized-text",children:u.split(`
`).map((i,w)=>r.jsx("div",{className:`text-line ${n===i?"selected-text":""}`,onClick:()=>z(i),children:i},w))})]})]}),n&&r.jsxs("section",{className:"input-section",children:[r.jsx("h2",{children:"📝 품번 정보 입력"}),r.jsxs("div",{className:"input-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"품번:"}),r.jsx("input",{type:"text",value:f,onChange:i=>U(i.target.value),placeholder:"품번을 입력하세요"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"수량:"}),r.jsx("input",{type:"number",value:a,onChange:i=>o(i.target.value),placeholder:"수량을 입력하세요"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"단위:"}),r.jsx("select",{value:e,onChange:i=>t(i.target.value),children:y.map(i=>r.jsx("option",{value:i,children:i},i))}),r.jsx("button",{className:"unit-edit-btn",onClick:()=>h(!x),children:"단위 추가"})]}),x&&r.jsxs("div",{className:"unit-editor",children:[r.jsx("input",{type:"text",placeholder:"새 단위 입력",onKeyPress:i=>{i.key==="Enter"&&(A(i.target.value),i.target.value="")}}),r.jsx("button",{onClick:()=>{const i=document.querySelector(".unit-editor input");i&&(A(i.value),i.value="")},children:"추가"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"유통기한 (선택):"}),r.jsx("input",{type:"text",value:l,onChange:i=>s(i.target.value),placeholder:"YYYYMMDD 형식 (예: 20241231)",maxLength:8})]}),r.jsx("button",{className:"add-btn",onClick:G,children:"➕ 품번 추가"})]})]}),g.length>0&&r.jsxs("section",{className:"list-section",children:[r.jsx("h2",{children:"📋 품번 목록"}),r.jsx("div",{className:"part-numbers-list",children:g.map(i=>r.jsxs("div",{className:"part-number-item",children:[r.jsxs("div",{children:[r.jsx("div",{className:"part-number",children:i.number}),r.jsxs("div",{className:"quantity",children:[i.quantity,i.unit]}),i.expiryDate&&r.jsxs("div",{className:"expiry-date",children:["유통기한: ",i.expiryDate]})]}),r.jsx("button",{className:"remove-btn",onClick:()=>Q(i.id),children:"삭제"})]},i.id))}),r.jsxs("div",{className:"final-actions",children:[r.jsx("button",{className:"save-btn",onClick:J,children:"💾 파일로 저장"}),r.jsx("button",{className:"share-btn",onClick:Y,children:"📤 공유하기"})]})]})]})]})}console.log("main.tsx 로드됨");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/partnumbermanager/sw.js").then(S=>{console.log("서비스 워커 등록 성공:",S.scope)}).catch(S=>{console.log("서비스 워커 등록 실패:",S)})});const T=document.getElementById("root");console.log("root 요소:",T);T?D(T).render(r.jsx(M.StrictMode,{children:r.jsx(le,{})})):console.error("root 요소를 찾을 수 없습니다!");
